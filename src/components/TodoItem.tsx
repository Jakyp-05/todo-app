import React, { useState } from "react";
import { ITodo } from "../models/model";
import TodoEdit from "./TodoEdit";

interface TodoProps {
  todos: ITodo[];
  onDelete: (id: Date) => void;
  onEdit: (newTodo: ITodo) => void;
}

const TodoItem: React.FC<TodoProps> = ({ todos, onDelete, onEdit }) => {
  const [edit, setEdit] = useState<boolean>(false);

  const handlePopup = () => {
    setEdit(!edit);
  };

  return (
    <div className="w-[440px] mx-auto mt-4 relative">
      {todos.map((todo, index) => (
        <div key={index} className="flex items-center justify-between">
          <div className="flex items-center">
            <input type="checkbox" />
            <h2 className="ml-2">{todo.title}</h2>
          </div>
          <div className="flex">
            <button
              onClick={handlePopup}
              className="bg-[#0085ff] w-[20px] h-[20px] mr-2 rounded flex items-center justify-center"
            >
              <svg
                width="10"
                height="10"
                viewBox="0 0 10 10"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M9.71615 1.80036L8.19966 0.283873C8.01661 0.100805 7.77323 0 7.51435 0C7.25549 0 7.01211 0.100805 6.82906 0.283868L0.480995 6.63191C0.420741 6.69216 0.381901 6.77052 0.370451 6.85496L0.00354065 9.55807C-0.0128139 9.67863 0.0280725 9.79989 0.114102 9.88591C0.187639 9.95944 0.286922 10 0.389512 10C0.406916 10 0.424432 9.99884 0.441931 9.99646L3.14502 9.62956C3.22947 9.61809 3.30783 9.57928 3.36808 9.519L9.71615 3.17098C9.8992 2.98793 10 2.74454 10 2.48568C10 2.22679 9.8992 1.98341 9.71615 1.80036ZM2.91009 8.87523L0.844357 9.15562L1.12475 7.0899L5.62317 2.59151L7.40848 4.37685L2.91009 8.87523ZM9.16525 2.62009L7.95937 3.82596L6.17404 2.04062L7.37991 0.834759C7.42838 0.786308 7.48494 0.779068 7.51435 0.779068C7.54375 0.779068 7.60032 0.786308 7.64879 0.834759L9.16527 2.35125C9.21372 2.39969 9.22095 2.45626 9.22095 2.48566C9.22095 2.51507 9.21371 2.57163 9.16525 2.62009Z"
                  fill="white"
                />
              </svg>
            </button>
            {edit && <TodoEdit close={setEdit} todo={todo} edit={onEdit}/>}
            <button
              onClick={() => onDelete(todo.id)}
              className="bg-[#ff0000] w-[20px] h-[20px] rounded flex items-center justify-center"
            >
              <svg
                width="10"
                height="10"
                viewBox="0 0 10 10"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M9.64286 1.5625H7.80402L7.04509 0.454102C6.83259 0.172402 6.50446 0 6.12946 0H3.87054C3.49554 0 3.14732 0.172402 2.95536 0.454102L2.19598 1.5625H0.357143C0.15904 1.5625 0 1.70176 0 1.875V2.1875C0 2.36133 0.15904 2.5 0.357143 2.5H0.714286V8.75C0.714286 9.44043 1.35379 10 2.14286 10H7.85714C8.64621 10 9.28571 9.44043 9.28571 8.75V2.5H9.64286C9.84152 2.5 10 2.36133 10 2.1875V1.875C10 1.70176 9.84152 1.5625 9.64286 1.5625ZM3.83705 0.99375C3.85938 0.95957 3.90402 0.9375 3.95089 0.9375H6.04911C6.09654 0.9375 6.14118 0.959473 6.1635 0.993652L6.55357 1.5625H3.44643L3.83705 0.99375ZM7.85714 9.0625H2.14286C1.9456 9.0625 1.78571 8.9226 1.78571 8.75V2.5H8.21429V8.75C8.21429 8.92188 8.05357 9.0625 7.85714 9.0625ZM5 8.125C5.19741 8.125 5.35714 7.98523 5.35714 7.8125V3.75C5.35714 3.57727 5.19741 3.4375 5 3.4375C4.80259 3.4375 4.64286 3.57812 4.64286 3.75V7.8125C4.64286 7.98438 4.80357 8.125 5 8.125ZM3.21429 8.125C3.41071 8.125 3.57143 7.98438 3.57143 7.8125V3.75C3.57143 3.57727 3.4117 3.4375 3.21429 3.4375C3.01688 3.4375 2.85714 3.57812 2.85714 3.75V7.8125C2.85714 7.98438 3.01786 8.125 3.21429 8.125ZM6.78571 8.125C6.98313 8.125 7.14286 7.98523 7.14286 7.8125V3.75C7.14286 3.57727 6.98313 3.4375 6.78571 3.4375C6.5883 3.4375 6.42857 3.57812 6.42857 3.75V7.8125C6.42857 7.98438 6.58929 8.125 6.78571 8.125Z"
                  fill="white"
                />
              </svg>
            </button>
          </div>
        </div>
      ))}
    </div>
  );
};

export default TodoItem;
